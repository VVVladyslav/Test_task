# TestTask - Order & Client Management API

Spring Boot REST API для управления клиентами и заказами.  
Реализовано по тестовому техническому заданию.

## Функциональность

Клиенты:
- CRUD операции (создание, просмотр, обновление).
- Поиск по имени, email, адресу (от 3 символов, регистронезависимо).
- Уникальный email.
- Активный/неактивный статус (с датой деактивации).
- Удаление не поддерживается, только деактивация.

Заказы:
- CRUD операции.
- Поля: title, supplier, consumer, price, startedAt, finishedAt, createdAt.
- Бизнес-ключ: комбинация (title, supplier, consumer) уникальна.
- Запрещено создавать заказы:
    - если price <= 0
    - если клиент неактивный
    - если суммарная прибыль клиента меньше -1000
- При создании заказа эмулируется задержка (1–10 секунд).
- Автоматический расчёт прибыли:
    - supplier получает +price
    - consumer получает -price

## Технологии

- Java 17
- Spring Boot 3
- Spring Data JPA (Hibernate)
- H2 Database (in-memory)
- Gradle
- PHP (для автоматизации тестов API)

## Запуск приложения

1. Собрать и запустить приложение:
   ./gradlew bootRun

или через IDE (запустить класс TestTaskApplication).

2. Приложение стартует на порту 8080:
   http://localhost:8080

## Тестирование API

1. В проекте есть php-скрипт src/main/java/com/example/demo/test_api/test_api.php
2. Запустить можно так:
   php src/main/java/com/example/demo/test_api/test_api.php

3. Скрипт выполнит проверки:
- создание клиента и заказа
- проверка уникальности заказов
- расчёт прибыли
- запрет заказа с отрицательной ценой
- работа при деактивации клиента

Результаты будут записаны в файл result.log.